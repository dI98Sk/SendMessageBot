# ‚è∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–¥–µ—Ä–∂–µ–∫ –º–µ–∂–¥—É —Ü–∏–∫–ª–∞–º–∏

## üìä –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞:

| Broadcaster | –¢–∏–ø | –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —Ü–∏–∫–ª–∞–º–∏ | –ü—Ä–∏—á–∏–Ω–∞ |
|-------------|-----|------------------------|---------|
| AAA_PRICE | –ü—Ä–∞–π—Å—ã | **20 –º–∏–Ω—É—Ç** | –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Ü–µ–Ω –≤–∞–∂–Ω–∞ |
| GUS_PRICE | –ü—Ä–∞–π—Å—ã | **20 –º–∏–Ω—É—Ç** | –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Ü–µ–Ω –≤–∞–∂–Ω–∞ |
| AAA_ADS | –†–µ–∫–ª–∞–º–∞ | **1 —á–∞—Å** | –ù–µ –Ω—É–∂–Ω–æ —á–∞—Å—Ç–æ —Å–ø–∞–º–∏—Ç—å |
| GUS_ADS | –†–µ–∫–ª–∞–º–∞ | **1 —á–∞—Å** | –ù–µ –Ω—É–∂–Ω–æ —á–∞—Å—Ç–æ —Å–ø–∞–º–∏—Ç—å |

## üéØ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã (–ø—Ä–∏–º–µ—Ä)

### –ü—Ä–∞–π—Å—ã (–∫–∞–∂–¥—ã–µ 20 –º–∏–Ω—É—Ç):
```
06:00 ‚îÄ‚îÄ –¶–∏–∫–ª 1 (AAA + GUS)
06:20 ‚îÄ‚îÄ –¶–∏–∫–ª 2
06:40 ‚îÄ‚îÄ –¶–∏–∫–ª 3
07:00 ‚îÄ‚îÄ –¶–∏–∫–ª 4
07:20 ‚îÄ‚îÄ –¶–∏–∫–ª 5
07:40 ‚îÄ‚îÄ –¶–∏–∫–ª 6
08:00 ‚îÄ‚îÄ –¶–∏–∫–ª 7
... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –∫–∞–∂–¥—ã–µ 20 –º–∏–Ω—É—Ç
```

### –†–µ–∫–ª–∞–º–∞ (–∫–∞–∂–¥—ã–π —á–∞—Å):
```
06:00 ‚îÄ‚îÄ –¶–∏–∫–ª 1 (AAA + GUS)
07:00 ‚îÄ‚îÄ –¶–∏–∫–ª 2
08:00 ‚îÄ‚îÄ –¶–∏–∫–ª 3
09:00 ‚îÄ‚îÄ –¶–∏–∫–ª 4
... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –∫–∞–∂–¥—ã–π —á–∞—Å
```

## üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã

### –ó–∞ –¥–µ–Ω—å (24 —á–∞—Å–∞):
- **–ü–†–ê–ô–°–´:** ~72 —Ü–∏–∫–ª–∞ (–∫–∞–∂–¥—ã–µ 20 –º–∏–Ω—É—Ç)
- **–†–ï–ö–õ–ê–ú–ê:** ~24 —Ü–∏–∫–ª–∞ (–∫–∞–∂–¥—ã–π —á–∞—Å)

### –ó–∞ –Ω–µ–¥–µ–ª—é:
- **–ü–†–ê–ô–°–´:** ~504 —Ü–∏–∫–ª–∞
- **–†–ï–ö–õ–ê–ú–ê:** ~168 —Ü–∏–∫–ª–æ–≤

**–ò—Ç–æ–≥–æ:** –ü—Ä–∞–π—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è **–≤ 3 —Ä–∞–∑–∞ —á–∞—â–µ** —Ä–µ–∫–ª–∞–º—ã! ‚ú®

## ‚öôÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### –í –∫–æ–¥–µ (`core/broadcaster.py`):

–î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `cycle_delay` –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:

```python
def __init__(self, config, name, targets, messages, 
             session_name=None, cycle_delay=None):
    # –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –∏–ª–∏ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    self.cycle_delay = cycle_delay if cycle_delay is not None else config.broadcasting.cycle_delay
```

### –í main.py:

```python
# –ü–†–ê–ô–°–´ - 20 –º–∏–Ω—É—Ç
PRICE_CYCLE_DELAY = 20 * 60  # 1200 —Å–µ–∫—É–Ω–¥

aaa_broadcaster = EnhancedBroadcaster(
    ...,
    cycle_delay=PRICE_CYCLE_DELAY  # 20 –º–∏–Ω—É—Ç
)

# –†–ï–ö–õ–ê–ú–ê - 1 —á–∞—Å  
ADS_CYCLE_DELAY = 60 * 60  # 3600 —Å–µ–∫—É–Ω–¥

aaa_ads_broadcaster = EnhancedBroadcaster(
    ...,
    cycle_delay=ADS_CYCLE_DELAY  # 1 —á–∞—Å
)
```

## üîß –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫

### –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–µ–∫ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `main.py`:

```python
# –ü—Ä–∞–π—Å—ã - —Å–¥–µ–ª–∞—Ç—å –±—ã—Å—Ç—Ä–µ–µ (10 –º–∏–Ω—É—Ç)
PRICE_CYCLE_DELAY = 10 * 60  # 600 —Å–µ–∫—É–Ω–¥

# –ü—Ä–∞–π—Å—ã - —Å–¥–µ–ª–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ (30 –º–∏–Ω—É—Ç)
PRICE_CYCLE_DELAY = 30 * 60  # 1800 —Å–µ–∫—É–Ω–¥

# –†–µ–∫–ª–∞–º–∞ - —Å–¥–µ–ª–∞—Ç—å –±—ã—Å—Ç—Ä–µ–µ (30 –º–∏–Ω—É—Ç)
ADS_CYCLE_DELAY = 30 * 60  # 1800 —Å–µ–∫—É–Ω–¥

# –†–µ–∫–ª–∞–º–∞ - —Å–¥–µ–ª–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ (2 —á–∞—Å–∞)
ADS_CYCLE_DELAY = 2 * 60 * 60  # 7200 —Å–µ–∫—É–Ω–¥
```

## üìä –í–ª–∏—è–Ω–∏–µ –Ω–∞ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

### –° –∑–∞–¥–µ—Ä–∂–∫–æ–π 20 –º–∏–Ω—É—Ç (–ø—Ä–∞–π—Å—ã):

**–ü—Ä–∏–º–µ—Ä:** 13 —Å–æ–æ–±—â–µ–Ω–∏–π, 2 —á–∞—Ç–∞, MIN_INTERVAL_PER_CHAT=600 —Å–µ–∫ (10 –º–∏–Ω)

- **–¶–∏–∫–ª 1 (0 –º–∏–Ω):** 2 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, 24 –æ—Ç–ª–æ–∂–µ–Ω–æ
- **–¶–∏–∫–ª 2 (+20 –º–∏–Ω):** 2-4 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, 20-22 –æ—Ç–ª–æ–∂–µ–Ω–æ
- **–¶–∏–∫–ª 3 (+40 –º–∏–Ω):** 2-4 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, 16-18 –æ—Ç–ª–æ–∂–µ–Ω–æ
- **–¶–∏–∫–ª 4 (+60 –º–∏–Ω):** 2-4 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ—Ç–ª–æ–∂–µ–Ω–æ

**–ò—Ç–æ–≥:** –ó–∞ ~2-3 —á–∞—Å–∞ –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã

### –° –∑–∞–¥–µ—Ä–∂–∫–æ–π 1 —á–∞—Å (—Ä–µ–∫–ª–∞–º–∞):

**–ü—Ä–∏–º–µ—Ä:** 5 —Å–æ–æ–±—â–µ–Ω–∏–π, 11 —á–∞—Ç–æ–≤

- **–¶–∏–∫–ª 1 (0 —á–∞—Å–æ–≤):** ~11 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- **–¶–∏–∫–ª 2 (+1 —á–∞—Å):** ~11 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- **–¶–∏–∫–ª 3 (+2 —á–∞—Å–∞):** ~11 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ

**–ò—Ç–æ–≥:** –ó–∞ ~5-6 —á–∞—Å–æ–≤ –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –ø—Ä–∞–π—Å–æ–≤ (20 –º–∏–Ω—É—Ç):
‚úÖ **–•–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:**
- –ß–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Ü–µ–Ω
- –ê–∫—Ç—É–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –ë—ã—Å—Ç—Ä–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π

‚ö†Ô∏è **–£—á–∏—Ç—ã–≤–∞–π—Ç–µ:**
- –ë–æ–ª—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ API
- –ë–æ–ª—å—à–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –¥–µ–Ω—å

### –î–ª—è —Ä–µ–∫–ª–∞–º—ã (1 —á–∞—Å):
‚úÖ **–•–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:**
- –†–µ–∫–ª–∞–º–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –ò–∑–±–µ–≥–∞–Ω–∏—è —Å–ø–∞–º–∞

‚ö†Ô∏è **–£—á–∏—Ç—ã–≤–∞–π—Ç–µ:**
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ –¥–æ—Å—Ç–∞–≤–∫–∞
- –ú–µ–Ω—å—à–µ —Ü–∏–∫–ª–æ–≤ –≤ –¥–µ–Ω—å

## üéØ –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –¢–µ–∫—É—â–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ):
- **–ü—Ä–∞–π—Å—ã:** 20 –º–∏–Ω—É—Ç ‚úÖ
- **–†–µ–∫–ª–∞–º–∞:** 1 —á–∞—Å ‚úÖ

### –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
- **–ü—Ä–∞–π—Å—ã:** 10 –º–∏–Ω—É—Ç ‚ö†Ô∏è
- **–†–µ–∫–ª–∞–º–∞:** 30 –º–∏–Ω—É—Ç ‚ö†Ô∏è

### –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ (–±–µ–∑–æ–ø–∞—Å–Ω–æ):
- **–ü—Ä–∞–π—Å—ã:** 30 –º–∏–Ω—É—Ç ‚úÖ
- **–†–µ–∫–ª–∞–º–∞:** 2 —á–∞—Å–∞ ‚úÖ

## üìù –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ª–æ–≥–∞—Ö

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ:

```
‚úÖ AAA PRICE Broadcaster —Å–æ–∑–¥–∞–Ω: ... —Ü–∏–∫–ª: 20 –º–∏–Ω
‚úÖ GUS PRICE Broadcaster —Å–æ–∑–¥–∞–Ω: ... —Ü–∏–∫–ª: 20 –º–∏–Ω
‚úÖ AAA ADS Broadcaster —Å–æ–∑–¥–∞–Ω: ... —Ü–∏–∫–ª: 1 —á–∞—Å
‚úÖ GUS ADS Broadcaster —Å–æ–∑–¥–∞–Ω: ... —Ü–∏–∫–ª: 1 —á–∞—Å
```

–í–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:
```
[INFO] AAA_PRICE_Broadcaster: –¶–∏–∫–ª –∑–∞–≤–µ—Ä—à—ë–Ω. –ñ–¥—ë–º 1200 —Å–µ–∫—É–Ω–¥ (20 –º–∏–Ω—É—Ç)...
[INFO] AAA_ADS_Broadcaster: –¶–∏–∫–ª –∑–∞–≤–µ—Ä—à—ë–Ω. –ñ–¥—ë–º 3600 —Å–µ–∫—É–Ω–¥ (60 –º–∏–Ω—É—Ç)...
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
python test_new_broadcasters.py

# –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç
python main_test.py
```

–í –≤—ã–≤–æ–¥–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–∫–∞–∑–∞–Ω–æ "—Ü–∏–∫–ª: 20 –º–∏–Ω" –∏ "—Ü–∏–∫–ª: 1 —á–∞—Å".

---

**‚úÖ –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É —Ü–∏–∫–ª–∞–º–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã!**

*–î–∞—Ç–∞: 2025-11-04*


