# ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∏—Å—Ç–µ–º—ã –æ—Ç—á–µ—Ç–æ–≤ –≤ Production

## üìã –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à .env —Ñ–∞–π–ª:
cat .env | grep REPORT
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- ‚úÖ `ENABLE_REPORTS=true`
- ‚úÖ `REPORTS_BOT_TOKEN=<—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather>`
- ‚úÖ `REPORTS_CHANNEL_ID=<ID_–∫–∞–Ω–∞–ª–∞_–∏–ª–∏_—á–∞—Ç–∞>`
- ‚úÖ `REPORT_INTERVAL_HOURS=3.0` (–∏–ª–∏ –¥—Ä—É–≥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- ‚úÖ `REPORTS_TIMEZONE=Europe/Moscow`

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ—Ç–∞

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_TOKEN –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω
curl "https://api.telegram.org/botYOUR_TOKEN/getMe"
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
```json
{
  "ok": true,
  "result": {
    "id": 123456789,
    "is_bot": true,
    "first_name": "YourBotName",
    ...
  }
}
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–Ω–∞–ª—É

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_TOKEN –∏ YOUR_CHAT_ID
curl "https://api.telegram.org/botYOUR_TOKEN/sendMessage?chat_id=YOUR_CHAT_ID&text=test"
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å `"ok": true` –∏ –±–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ.

### 4. –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫

```bash
# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (1 –º–∏–Ω—É—Ç–∞)
python test_reports.py
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π –æ—Ç—á–µ—Ç —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!
```

## üöÄ –ó–∞–ø—É—Å–∫ –≤ Production

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫

```bash
python main.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –í —Ñ–æ–Ω–µ —Å –ª–æ–≥–∞–º–∏

```bash
nohup python main.py > output.log 2>&1 &
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –° systemd (Linux)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/systemd/system/sendmessagebot.service`:

```ini
[Unit]
Description=SendMessageBot
After=network.target

[Service]
Type=simple
User=your_user
WorkingDirectory=/path/to/SendMessageBot
ExecStart=/usr/bin/python3 main.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
sudo systemctl enable sendmessagebot
sudo systemctl start sendmessagebot
sudo systemctl status sendmessagebot
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
# –í—Å–µ –ª–æ–≥–∏ –æ—Ç—á–µ—Ç–æ–≤
tail -f bot.log | grep telegram_reporter

# –¢–æ–ª—å–∫–æ —É—Å–ø–µ—à–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
tail -f bot.log | grep "–û—Ç—á–µ—Ç #"

# –û—à–∏–±–∫–∏
tail -f bot.log | grep ERROR
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ broadcaster'–æ–≤

```bash
python show_stats.py
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤

–û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–Ω–∞–ª/—á–∞—Ç –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤.

## ‚è∞ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤

–° —Ç–µ–∫—É—â–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ `REPORT_INTERVAL_HOURS=3.0`:

| –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ | –ü–µ—Ä–≤—ã–π –æ—Ç—á–µ—Ç | –í—Ç–æ—Ä–æ–π –æ—Ç—á–µ—Ç | –¢—Ä–µ—Ç–∏–π –æ—Ç—á–µ—Ç |
|---------------|--------------|--------------|--------------|
| 06:00         | ~06:30-07:00 | ~09:30-10:00 | ~12:30-13:00 |
| 12:00         | ~12:30-13:00 | ~15:30-16:00 | ~18:30-19:00 |
| 18:00         | ~18:30-19:00 | ~21:30-22:00 | ~00:30-01:00 |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –û—Ç—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ (broadcaster'—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ).

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –û—Ç—á–µ—Ç—ã –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

**–®–∞–≥ 1:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
```bash
tail -100 bot.log | grep -E "(telegram_reporter|–æ—Ç—á–µ—Ç)"
```

**–®–∞–≥ 2:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Ä–µ–ø–æ—Ä—Ç–µ—Ä–∞
```bash
grep "–°–∏—Å—Ç–µ–º–∞ –æ—Ç—á–µ—Ç–æ–≤ –∑–∞–ø—É—â–µ–Ω–∞" bot.log
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
[INFO] telegram_reporter: –°–∏—Å—Ç–µ–º–∞ –æ—Ç—á–µ—Ç–æ–≤ –∑–∞–ø—É—â–µ–Ω–∞
[INFO] telegram_reporter: üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –æ—Ç—á–µ—Ç–æ–≤ (–∏–Ω—Ç–µ—Ä–≤–∞–ª: 3.0 —á–∞—Å–æ–≤)
[INFO] telegram_reporter: üìä –ö–∞–Ω–∞–ª –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤: -1003060449819
```

**–®–∞–≥ 3:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –µ—Å—Ç—å –ª–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
```bash
tail -50 bot.log | grep "–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ:"
```

–ï—Å–ª–∏ –≤–µ–∑–¥–µ `–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 0`, –∑–Ω–∞—á–∏—Ç broadcaster'—ã –µ—â–µ –Ω–µ –Ω–∞—á–∞–ª–∏ —Ä–∞–±–æ—Ç—É –∏–ª–∏ –∂–¥—É—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞—á–∞–ª–∞.

### Broadcaster'—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 1:** –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã
```bash
grep "–∂–¥—ë–º –¥–æ" bot.log | tail -5
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:
```
–°–µ–π—á–∞—Å 01:00, –∂–¥—ë–º –¥–æ 06:00 (300 –º–∏–Ω.)
```

–ó–Ω–∞—á–∏—Ç broadcaster'—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ –∑–∞–ø—É—Å–∫ –≤ 6:00 —É—Ç—Ä–∞. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è production.

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 2:** –¢–∏—Ö–∏–π —á–∞—Å
```bash
grep "–¢–∏—Ö–∏–π —á–∞—Å" bot.log | tail -5
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:
```
üåô –¢–∏—Ö–∏–π —á–∞—Å (—Å 00:00 –¥–æ 07:00). –°–µ–π—á–∞—Å 02:00, –∂–¥—ë–º –¥–æ 07:00
```

–ó–Ω–∞—á–∏—Ç broadcaster'—ã –≤ —Ç–∏—Ö–æ–º —á–∞—Å–µ. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è production.

**–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è:**
```bash
# –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å scheduling –∏ —Ç–∏—Ö–∏–π —á–∞—Å
export ENABLE_SCHEDULING=false
export ENABLE_QUIET_HOURS=false
python test_reports_immediate.py
```

## üìà –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### –ù–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

```
[INFO] –ó–∞–ø—É—Å–∫ broadcaster 1/2: AAA_Broadcaster
[INFO] –ó–∞–ø—É—Å–∫ broadcaster 2/2: GUS_Broadcaster
[INFO] –°–∏—Å—Ç–µ–º–∞ –æ—Ç—á–µ—Ç–æ–≤ –∑–∞–ø—É—â–µ–Ω–∞ (–∏–Ω—Ç–µ—Ä–≤–∞–ª: 3.0 —á–∞—Å–æ–≤)
[INFO] telegram_reporter: üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –æ—Ç—á–µ—Ç–æ–≤
[INFO] telegram_reporter: üìä –ö–∞–Ω–∞–ª –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤: -1003060449819
```

–ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç:
```
[INFO] broadcaster.AAA_Broadcaster: ‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Ññ1 –≤ -1002679672234
[INFO] broadcaster.GUS_Broadcaster: ‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Ññ1 –≤ -1002679672234
```

–ß–µ—Ä–µ–∑ N —á–∞—Å–æ–≤ (–ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ):
```
[INFO] telegram_reporter: üìà –ü–æ—Ä–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ç—á–µ—Ç...
[INFO] telegram_reporter: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞...
[INFO] telegram_reporter: –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–∞: 42 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, 3 –æ—à–∏–±–æ–∫
[INFO] telegram_reporter: ‚úÖ –û—Ç—á–µ—Ç —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram
[INFO] telegram_reporter: ‚úÖ –û—Ç—á–µ—Ç #1 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ –≤ –∫–∞–Ω–∞–ª -1003060449819
```

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (–ø—É—Å—Ç–æ–π –æ—Ç—á–µ—Ç)

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —É–≤–∏–¥–∏—Ç–µ:
```
[INFO] telegram_reporter: –ü—Ä–æ–ø—É—Å–∫ –æ—Ç—á–µ—Ç–∞: –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ (broadcaster'—ã –µ—â–µ –Ω–µ –Ω–∞—á–∞–ª–∏ —Ä–∞–±–æ—Ç—É)
```

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –û—Ç—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ broadcaster'—ã –Ω–∞—á–Ω—É—Ç —Ä–∞–±–æ—Ç—É –∏ –æ—Ç–ø—Ä–∞–≤—è—Ç —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ.

## üéØ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø—É–Ω–∫—Ç—ã:

- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –¢–æ–∫–µ–Ω –±–æ—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ curl)
- [ ] –ë–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–∞–Ω–∞–ª/—á–∞—Ç
- [ ] –ë–æ—Ç –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ
- [ ] –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –≤ production
- [ ] –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É
- [ ] –ü–æ–ª—É—á–µ–Ω –ø–µ—Ä–≤—ã–π –æ—Ç—á–µ—Ç –≤ Telegram

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -100 bot.log`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é: `HOW_TO_USE_REPORTS.md`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç: `python test_reports.py`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: `REPORTS_FIX_SUMMARY.md`

---

**–°–∏—Å—Ç–µ–º–∞ –æ—Ç—á–µ—Ç–æ–≤ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ! üöÄ**

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2025-11-04*


