# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —Ñ–∞–π–ª–æ–≤ —Å–µ—Å—Å–∏–π

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

**OperationalError: database is locked**

–ù–µ—Å–∫–æ–ª—å–∫–æ broadcaster'–æ–≤ –ø—ã—Ç–∞–ª–∏—Å—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª —Å–µ—Å—Å–∏–∏ SQLite, —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

### –ë—ã–ª–æ (–∫–æ–Ω—Ñ–ª–∏–∫—Ç):
```
AAA_PRICE ‚Üí sessions/acc1.session  ‚ö†Ô∏è
GUS_ADS   ‚Üí sessions/acc1.session  ‚ö†Ô∏è  –ö–û–ù–§–õ–ò–ö–¢!

GUS_PRICE ‚Üí sessions/acc2.session  ‚ö†Ô∏è
AAA_ADS   ‚Üí sessions/acc2.session  ‚ö†Ô∏è  –ö–û–ù–§–õ–ò–ö–¢!
```

SQLite –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∫ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—É.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–ö–∞–∂–¥—ã–π broadcaster –ø–æ–ª—É—á–∏–ª **—É–Ω–∏–∫–∞–ª—å–Ω—ã–π** —Ñ–∞–π–ª —Å–µ—Å—Å–∏–∏:

```
AAA_PRICE ‚Üí sessions/acc1_price.session  ‚úÖ
GUS_PRICE ‚Üí sessions/acc2_price.session  ‚úÖ
AAA_ADS   ‚Üí sessions/acc2_ads.session    ‚úÖ
GUS_ADS   ‚Üí sessions/acc1_ads.session    ‚úÖ
```

## üîß –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –°–æ–∑–¥–∞–Ω—ã –∫–æ–ø–∏–∏ —Ñ–∞–π–ª–æ–≤ —Å–µ—Å—Å–∏–π

```bash
sessions/
‚îú‚îÄ‚îÄ acc1.session          # –û—Ä–∏–≥–∏–Ω–∞–ª (–¥–ª—è –±—ç–∫–∞–ø–∞)
‚îú‚îÄ‚îÄ acc1_price.session    # –î–ª—è AAA_PRICE
‚îú‚îÄ‚îÄ acc1_ads.session      # –î–ª—è GUS_ADS
‚îú‚îÄ‚îÄ acc2.session          # –û—Ä–∏–≥–∏–Ω–∞–ª (–¥–ª—è –±—ç–∫–∞–ø–∞)
‚îú‚îÄ‚îÄ acc2_price.session    # –î–ª—è GUS_PRICE
‚îî‚îÄ‚îÄ acc2_ads.session      # –î–ª—è AAA_ADS
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω main.py

Broadcaster'—ã —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:

```python
# –ü–†–ê–ô–°–´
AAA_PRICE: session_name="sessions/acc1_price"
GUS_PRICE: session_name="sessions/acc2_price"

# –†–ï–ö–õ–ê–ú–ê
AAA_ADS: session_name="sessions/acc2_ads"
GUS_ADS: session_name="sessions/acc1_ads"
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω main_test.py

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ - —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ broadcaster'–∞.

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
‚ùå –û—à–∏–±–æ–∫: 11
üö® –¢–∏–ø—ã –æ—à–∏–±–æ–∫: OperationalError: 11
üìà –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 0.0%
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
‚úÖ –í—Å–µ broadcaster'—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
‚úÖ –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
‚úÖ –í—Å–µ broadcaster'—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
```

## üí° –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

SQLite (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Telethon –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–π) –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- ‚ùå –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- ‚ùå –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –∑–∞–ø–∏—Å—å

–° —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏:
- ‚úÖ –ö–∞–∂–¥—ã–π broadcaster —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ —Å–≤–æ–∏–º —Ñ–∞–π–ª–æ–º
- ‚úÖ –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- ‚úÖ –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

## üîß –í–∞–∂–Ω–æ –¥–ª—è –±—É–¥—É—â–µ–≥–æ

### –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö broadcaster'–æ–≤:

**–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞ —Å–µ—Å—Å–∏–∏!**

```python
new_broadcaster = EnhancedBroadcaster(
    config=config,
    name="NEW_Broadcaster",
    targets=targets,
    messages=messages,
    session_name="sessions/acc1_new"  # ‚Üê –£–ù–ò–ö–ê–õ–¨–ù–û–ï –∏–º—è!
)
```

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ —Å–µ—Å—Å–∏–∏:

```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–µ—Å—Å–∏—é
cp sessions/acc1.session sessions/acc1_new.session

# –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é (–ø–æ—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
# –§–∞–π–ª —Å–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
python test_new_broadcasters.py
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
‚úÖ –í–°–ï BROADCASTER'–´ –°–û–ó–î–ê–ù–´ –£–°–ü–ï–®–ù–û!
```

–ë–µ–∑ –æ—à–∏–±–æ–∫ OperationalError!

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-11-04  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ


