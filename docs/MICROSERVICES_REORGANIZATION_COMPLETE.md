# ‚úÖ –†–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∑–∞–≤–µ—Ä—à–µ–Ω–∞

**–î–∞—Ç–∞:** 2025-12-10  
**–í–µ—Ä—Å–∏—è:** 2.1

---

## üéâ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

–ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É.

---

## üìÅ –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
SendMessageBot/
‚îú‚îÄ‚îÄ broadcaster/                    # ‚úÖ Broadcaster Service
‚îÇ   ‚îú‚îÄ‚îÄ main.py                    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ core/                      # –Ø–¥—Ä–æ (broadcaster, coordinator, queue, retry)
‚îÇ   ‚îú‚îÄ‚îÄ config/                     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (settings, targets, messages)
‚îÇ   ‚îú‚îÄ‚îÄ monitoring/                 # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (metrics, notifications, reports)
‚îÇ   ‚îî‚îÄ‚îÄ utils/                      # –£—Ç–∏–ª–∏—Ç—ã (auto_updater, logger, chat_validator)
‚îÇ
‚îú‚îÄ‚îÄ google_sheets_updater/          # ‚úÖ Google Sheets Updater Service
‚îÇ   ‚îú‚îÄ‚îÄ main.py                    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ updater/                   # –õ–æ–≥–∏–∫–∞ (sheet_updater, scheduled_updater, telegram_fetcher)
‚îÇ   ‚îú‚îÄ‚îÄ config/                     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ utils/                      # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ shared/                         # ‚úÖ –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ google_sheets/              # Google Sheets –∫–ª–∏–µ–Ω—Ç
‚îÇ       ‚îú‚îÄ‚îÄ client.py               # –ë–∞–∑–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç (–¥–ª—è updater)
‚îÇ       ‚îî‚îÄ‚îÄ fetcher.py              # Fetcher (–¥–ª—è broadcaster)
‚îÇ
‚îú‚îÄ‚îÄ main.py                         # ‚úÖ –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ scripts/                        # ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ start_broadcaster.sh/bat
‚îÇ   ‚îú‚îÄ‚îÄ start_updater.sh/bat
‚îÇ   ‚îú‚îÄ‚îÄ start_all.sh/bat
‚îÇ   ‚îî‚îÄ‚îÄ stop_all.sh/bat
‚îÇ
‚îú‚îÄ‚îÄ sessions/                        # –§–∞–π–ª—ã —Å–µ—Å—Å–∏–π Telegram
‚îú‚îÄ‚îÄ logs/                           # –õ–æ–≥–∏
‚îî‚îÄ‚îÄ requirements.txt                # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

- ‚úÖ `main.py` ‚Üí `broadcaster/main.py`
- ‚úÖ `core/` ‚Üí `broadcaster/core/`
- ‚úÖ `config/` ‚Üí `broadcaster/config/`
- ‚úÖ `monitoring/` ‚Üí `broadcaster/monitoring/`
- ‚úÖ `utils/` ‚Üí `broadcaster/utils/` (–∫—Ä–æ–º–µ –æ–±—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)

### 2. –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- ‚úÖ `utils/google_sheets.py` ‚Üí `shared/google_sheets/fetcher.py`
- ‚úÖ `shared/google_sheets/client.py` —Å–æ–∑–¥–∞–Ω –¥–ª—è updater

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤

- ‚úÖ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –≤ `broadcaster/` –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `broadcaster.`
- ‚úÖ –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∏–∑ `shared/`
- ‚úÖ –ò–º–ø–æ—Ä—Ç—ã –≤ `google_sheets_updater/` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `shared/`

### 4. –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞

- ‚úÖ `scripts/start_broadcaster.sh/bat` - –∑–∞–ø—É—Å–∫ broadcaster
- ‚úÖ `scripts/start_updater.sh/bat` - –∑–∞–ø—É—Å–∫ updater
- ‚úÖ `scripts/start_all.sh/bat` - –∑–∞–ø—É—Å–∫ –æ–±–æ–∏—Ö
- ‚úÖ `scripts/stop_all.sh/bat` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö

### 5. –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ `main.py` –≤ –∫–æ—Ä–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±–µ—Ä—Ç–∫–∞
- ‚úÖ –°—Ç–∞—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

### 6. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚úÖ `docs/MICROSERVICES_ARCHITECTURE.md` - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ `docs/MICROSERVICES_MIGRATION.md` - –º–∏–≥—Ä–∞—Ü–∏—è
- ‚úÖ `docs/RUNNING_MICROSERVICES.md` - –∑–∞–ø—É—Å–∫
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `README.md`

---

## üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

### Broadcaster Service

```bash
python broadcaster/main.py
# –∏–ª–∏
scripts/start_broadcaster.sh  # Linux/Mac
scripts/start_broadcaster.bat  # Windows
```

### Google Sheets Updater Service

```bash
python google_sheets_updater/main.py
# –∏–ª–∏
scripts/start_updater.sh  # Linux/Mac
scripts/start_updater.bat  # Windows
```

### –û–±–∞ —Å–µ—Ä–≤–∏—Å–∞

```bash
scripts/start_all.sh  # Linux/Mac
scripts/start_all.bat  # Windows
```

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

```bash
python main.py  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç broadcaster/main.py
```

---

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ:**
   - –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –≤ —Å–≤–æ–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
   - –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ `shared/`
   - –ù–µ—Ç —Å–º–µ—à–∏–≤–∞–Ω–∏—è –∫–æ–¥–∞

2. **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:**
   - –°–µ—Ä–≤–∏—Å—ã –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
   - –õ–µ–≥—á–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–µ –≤–ª–∏—è—é—Ç –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞

3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:**
   - –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã
   - –õ–µ–≥–∫–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (Docker)
   - –ú–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö

4. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å:**
   - –ß–µ—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
   - –õ–µ–≥—á–µ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π –∫–æ–¥
   - –ú–µ–Ω—å—à–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤

–í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- `broadcaster.*` –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ broadcaster
- `shared.*` –¥–ª—è –æ–±—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- `google_sheets_updater.*` –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ updater

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
python -m py_compile broadcaster/main.py
python -m py_compile google_sheets_updater/main.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤
python -c "from broadcaster.main import main; print('‚úÖ Broadcaster OK')"
python -c "from google_sheets_updater.main import main; print('‚úÖ Updater OK')"
```

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ª–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
   - –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏–∑ –∫–æ—Ä–Ω—è (–µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω—ã)
   - –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
   - –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å systemd/supervisor –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
   - –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å—Å—ã–ª–∫–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
   - –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [MICROSERVICES_ARCHITECTURE.md](MICROSERVICES_ARCHITECTURE.md) - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- [MICROSERVICES_MIGRATION.md](MICROSERVICES_MIGRATION.md) - –º–∏–≥—Ä–∞—Ü–∏—è
- [RUNNING_MICROSERVICES.md](RUNNING_MICROSERVICES.md) - –∑–∞–ø—É—Å–∫
- [README.md](../README.md) - –æ–±—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-10  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

