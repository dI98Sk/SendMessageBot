# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ü–∏–∫–ª–æ–≤ —Ä–∞—Å—Å—ã–ª–∫–∏

**–î–∞—Ç–∞:** 2025-12-13

---

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

Broadcaster'—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 0
- üîÑ –¶–∏–∫–ª–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–æ: 0

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ü–∏–∫–ª—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∏–ª–∏ –Ω–µ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è.

---

## ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –º–µ—Ç–æ–¥–µ `start()`

–¢–µ–ø–µ—Ä—å –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è:
- üöÄ –ù–∞—á–∞–ª–æ –∑–∞–ø—É—Å–∫–∞ broadcaster
- ‚è∞ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —Å—Ç–∞—Ä—Ç–∞ (wait_time, enable_scheduling)
- ‚è∞ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–º–µ—â–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Å—Ç–∞—Ä—Ç–∞
- üîÑ –í—Ö–æ–¥ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
- üîÑ –ù–æ–º–µ—Ä –∫–∞–∂–¥–æ–≥–æ —Ü–∏–∫–ª–∞
- üåô –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏—Ö–æ–≥–æ —á–∞—Å–∞ (is_quiet, enable_quiet_hours, wait_time)
- üîå –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —Ü–∏–∫–ª–æ–º
- üì® –í—ã–∑–æ–≤ _send_messages_cycle()
- ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Ü–∏–∫–ª–∞

### 2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –º–µ—Ç–æ–¥–µ `_send_messages_cycle()`

–¢–µ–ø–µ—Ä—å –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è:
- üîÑ –ù–∞—á–∞–ª–æ —Ü–∏–∫–ª–∞ —Ä–∞—Å—Å—ã–ª–∫–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ü–µ–ª–µ–π –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- üì® –ù–∞—á–∞–ª–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ —á–∞—Ç—ã
- üì® –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∂–¥–æ–≥–æ —á–∞—Ç–∞ (–Ω–æ–º–µ—Ä/–≤—Å–µ–≥–æ)
- üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–∞–∂–¥—ã–π —á–∞—Ç
- ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
- ‚ùå –ù–µ—É—Å–ø–µ—à–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
- ‚è≥ –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —á–∞—Ç–∞–º–∏
- üîÑ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–∏–∫–ª–∞ —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

---

## üîç –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∑–∞–ø—É—Å–∫–∞

```bash
tail -f logs/broadcaster.log | grep -E "(–ó–∞–ø—É—Å–∫ broadcaster|–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —Å—Ç–∞—Ä—Ç–∞|–í—Ö–æ–¥ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª)"
```

**–î–æ–ª–∂–Ω—ã –±—ã—Ç—å:**
```
üöÄ [AAA_PRICE_Broadcaster] –ó–∞–ø—É—Å–∫ broadcaster –Ω–∞—á–∞—Ç
‚è∞ [AAA_PRICE_Broadcaster] –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —Å—Ç–∞—Ä—Ç–∞...
‚è∞ [AAA_PRICE_Broadcaster] –í—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞: wait_time=0—Å, enable_scheduling=True
üîÑ [AAA_PRICE_Broadcaster] –í—Ö–æ–¥ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Ä–∞—Å—Å—ã–ª–∫–∏...
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Ü–∏–∫–ª–æ–≤

```bash
tail -f logs/broadcaster.log | grep -E "(–ù–ê–ß–ê–õ–û –¶–ò–ö–õ–ê|–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏—Ö–æ–≥–æ —á–∞—Å–∞|–í—ã–∑–æ–≤ _send_messages_cycle)"
```

**–î–æ–ª–∂–Ω—ã –±—ã—Ç—å:**
```
üîÑ [AAA_PRICE_Broadcaster] === –ù–ê–ß–ê–õ–û –¶–ò–ö–õ–ê #1 ===
üåô [AAA_PRICE_Broadcaster] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏—Ö–æ–≥–æ —á–∞—Å–∞...
üåô [AAA_PRICE_Broadcaster] –¢–∏—Ö–∏–π —á–∞—Å: is_quiet=False, enable_quiet_hours=True
üîå [AAA_PRICE_Broadcaster] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —Ü–∏–∫–ª–æ–º...
üì® [AAA_PRICE_Broadcaster] –í—ã–∑–æ–≤ _send_messages_cycle()...
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏

```bash
tail -f logs/broadcaster.log | grep -E "(–ù–ê–ß–ê–õ–û –¶–ò–ö–õ–ê –†–ê–°–°–´–õ–ö–ò|–û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞—Ç–∞|–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è)"
```

**–î–æ–ª–∂–Ω—ã –±—ã—Ç—å:**
```
üîÑ [AAA_PRICE_Broadcaster] ========== –ù–ê–ß–ê–õ–û –¶–ò–ö–õ–ê –†–ê–°–°–´–õ–ö–ò ==========
‚úÖ [AAA_PRICE_Broadcaster] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞: –µ—Å—Ç—å 25 —á–∞—Ç–æ–≤ –∏ 23 —Å–æ–æ–±—â–µ–Ω–∏–π
üì® [AAA_PRICE_Broadcaster] –ù–∞—á–∏–Ω–∞–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É –≤ 25 —á–∞—Ç–æ–≤...
üì® [AAA_PRICE_Broadcaster] –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞—Ç–∞ 1/25: -1001234567890
üì§ [AAA_PRICE_Broadcaster] –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç -1001234567890 (1/25)...
```

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –¶–∏–∫–ª—ã –Ω–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ù–µ—Ç –ª–æ–≥–æ–≤ "–í—Ö–æ–¥ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Ä–∞—Å—Å—ã–ª–∫–∏..."
- –ù–µ—Ç –ª–æ–≥–æ–≤ "–ù–ê–ß–ê–õ–û –¶–ò–ö–õ–ê #1"

**–ü—Ä–∏—á–∏–Ω—ã:**
1. **–í—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞ –Ω–µ –Ω–∞—Å—Ç—É–ø–∏–ª–æ**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `‚è∞ –í—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞: wait_time=...`
   - –ï—Å–ª–∏ wait_time > 0, broadcaster –∂–¥–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å—Ç–∞—Ä—Ç–∞
   - –†–µ—à–µ–Ω–∏–µ: –¥–æ–∂–¥–∏—Ç–µ—Å—å –≤—Ä–µ–º–µ–Ω–∏ —Å—Ç–∞—Ä—Ç–∞ –∏–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ `enable_scheduling`

2. **–¢–∏—Ö–∏–π —á–∞—Å –∞–∫—Ç–∏–≤–µ–Ω**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `üåô –¢–∏—Ö–∏–π —á–∞—Å: is_quiet=True`
   - –†–µ—à–µ–Ω–∏–µ: –¥–æ–∂–¥–∏—Ç–µ—Å—å –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ç–∏—Ö–æ–≥–æ —á–∞—Å–∞ –∏–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ `enable_quiet_hours`

3. **–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
   - –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫—É

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –¶–∏–∫–ª—ã –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è, –Ω–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ï—Å—Ç—å –ª–æ–≥–∏ "–ù–ê–ß–ê–õ–û –¶–ò–ö–õ–ê #1"
- –ù–µ—Ç –ª–æ–≥–æ–≤ "–ù–ê–ß–ê–õ–û –¶–ò–ö–õ–ê –†–ê–°–°–´–õ–ö–ò"
- –ù–µ—Ç –ª–æ–≥–æ–≤ "–û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞—Ç–∞"

**–ü—Ä–∏—á–∏–Ω—ã:**
1. **–ù–µ—Ç —Ü–µ–ª–µ–π –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–π**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `‚ö†Ô∏è –ù–µ—Ç —Ü–µ–ª–µ–≤—ã—Ö —á–∞—Ç–æ–≤` –∏–ª–∏ `‚ö†Ô∏è –ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π`
   - –†–µ—à–µ–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é targets –∏ messages

2. **–û—à–∏–±–∫–∞ –≤ _send_messages_cycle()**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
   - –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫—É

3. **–¢–∏—Ö–∏–π —á–∞—Å –Ω–∞—Å—Ç—É–ø–∏–ª –≤–æ –≤—Ä–µ–º—è —Ü–∏–∫–ª–∞**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `üåô –ù–∞—Å—Ç—É–ø–∏–ª —Ç–∏—Ö–∏–π —á–∞—Å. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞—Å—Å—ã–ª–∫—É.`
   - –†–µ—à–µ–Ω–∏–µ: –¥–æ–∂–¥–∏—Ç–µ—Å—å –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ç–∏—Ö–æ–≥–æ —á–∞—Å–∞

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ï—Å—Ç—å –ª–æ–≥–∏ "–û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞—Ç–∞"
- –ï—Å—Ç—å –ª–æ–≥–∏ "–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è"
- –ù–µ—Ç –ª–æ–≥–æ–≤ "‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ"

**–ü—Ä–∏—á–∏–Ω—ã:**
1. **–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ`
   - –†–µ—à–µ–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö

2. **Rate limiting**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `‚è≥ –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —á–∞—Ç` –∏–ª–∏ `‚è≥ –ì–ª–æ–±–∞–ª—å–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞`
   - –†–µ—à–µ–Ω–∏–µ: —É–≤–µ–ª–∏—á—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –∏–ª–∏ —É–º–µ–Ω—å—à–∏—Ç–µ —á–∞—Å—Ç–æ—Ç—É –æ—Ç–ø—Ä–∞–≤–∫–∏

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ broadcaster –∑–∞–ø—É—â–µ–Ω
   ```bash
   ps aux | grep "broadcaster/main.py"
   ```

2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∑–∞–ø—É—Å–∫–∞
   ```bash
   grep "–ó–∞–ø—É—Å–∫ broadcaster –Ω–∞—á–∞—Ç" logs/broadcaster.log
   ```

3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Ü–∏–∫–ª–æ–≤
   ```bash
   grep "–ù–ê–ß–ê–õ–û –¶–ò–ö–õ–ê" logs/broadcaster.log | tail -5
   ```

4. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Ä–µ–º–µ–Ω–∏
   ```bash
   grep -E "(enable_scheduling|enable_quiet_hours|start_time_hour|quiet_hour)" .env
   ```

5. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ü–µ–ª–µ–π –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
   ```bash
   grep -E "(–¶–µ–ª–µ–≤—ã—Ö —á–∞—Ç–æ–≤|–°–æ–æ–±—â–µ–Ω–∏–π)" logs/broadcaster.log | tail -5
   ```

---

## üîß –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ï—Å–ª–∏ —Ü–∏–∫–ª—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∏–∑-–∑–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤—Ä–µ–º–µ–Ω–∏:

1. **–û—Ç–∫–ª—é—á–∏—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:**
   ```env
   ENABLE_SCHEDULING=false
   ```

2. **–û—Ç–∫–ª—é—á–∏—Ç–µ —Ç–∏—Ö–∏–π —á–∞—Å:**
   ```env
   ENABLE_QUIET_HOURS=false
   ```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:**
   ```bash
   bash scripts/stop_all.sh
   sleep 5
   bash scripts/start_all.sh
   ```

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-13  
**–í–µ—Ä—Å–∏—è:** 1.0

