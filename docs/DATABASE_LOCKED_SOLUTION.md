# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã "database is locked"

**–î–∞—Ç–∞:** 2025-12-13

---

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

### –°–∏–º–ø—Ç–æ–º—ã:

1. **"Please enter your phone (or bot token):"**
   - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
   - –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ —Å–µ—Å—Å–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞

2. **"database is locked"**
   - SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
   - –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö broadcaster'–æ–≤

### –ü—Ä–∏—á–∏–Ω–∞:

- –ù–µ—Å–∫–æ–ª—å–∫–æ broadcaster'–æ–≤ –ø—ã—Ç–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Telegram
- SQLite –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é –∑–∞–ø–∏—Å—å –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –°–µ—Å—Å–∏–∏ –Ω–µ —Å–æ–∑–¥–∞–Ω—ã –∑–∞—Ä–∞–Ω–µ–µ

---

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### 1. –£–≤–µ–ª–∏—á–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏

**–ë—ã–ª–æ:** 5 —Å–µ–∫—É–Ω–¥  
**–°—Ç–∞–ª–æ:** 10 —Å–µ–∫—É–Ω–¥

–≠—Ç–æ –¥–∞–µ—Ç SQLite –≤—Ä–µ–º—è –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º.

### 2. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ "database is locked"

- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫:** —É–≤–µ–ª–∏—á–µ–Ω–æ –¥–æ 3 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞:** —É–≤–µ–ª–∏—á–µ–Ω–∞ –¥–æ 15 —Å–µ–∫—É–Ω–¥
- **–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞:** –æ—Ç 5 –¥–æ 15 —Å–µ–∫—É–Ω–¥

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–π –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ —Å–µ—Å—Å–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –µ—Å–ª–∏ < 1KB)
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–π –∑–∞—Ä–∞–Ω–µ–µ

### 4. –£–≤–µ–ª–∏—á–µ–Ω —Ç–∞–π–º–∞—É—Ç –¥–ª—è start()

**–ë—ã–ª–æ:** 30 —Å–µ–∫—É–Ω–¥  
**–°—Ç–∞–ª–æ:** 60 —Å–µ–∫—É–Ω–¥

–≠—Ç–æ –¥–∞–µ—Ç –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –æ–∂–∏–¥–∞–Ω–∏–∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.

---

## üîÑ –ß—Ç–æ –¥–µ–ª–∞—Ç—å

### 1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Å–µ—Å—Å–∏–∏ —Å–æ–∑–¥–∞–Ω—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–π
ls -la sessions/*.session

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
# - sessions/acc1_price.session
# - sessions/acc1_ads.session
# - sessions/acc1_b2c.session
# - sessions/acc1_b2c_midslow.session
# - sessions/acc2_price.session
# - sessions/acc2_ads.session
```

### 2. –ï—Å–ª–∏ —Å–µ—Å—Å–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

**–°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Å—Å–∏—é –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ:**

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ broadcaster –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ
python broadcaster/main.py

# –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:
# 1. –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
# 2. –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ Telegram
# 3. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏
# 4. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ (Ctrl+C)
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ
bash scripts/stop_all.sh

# –ü–æ–¥–æ–∂–¥–∏—Ç–µ 5 —Å–µ–∫—É–Ω–¥
sleep 5

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
bash scripts/start_all.sh
```

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```bash
tail -f logs/broadcaster.log
```

**–î–æ–ª–∂–Ω—ã –±—ã—Ç—å:**
- ‚úÖ –§–∞–π–ª —Å–µ—Å—Å–∏–∏ –Ω–∞–π–¥–µ–Ω
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫–∞–∫ ...
- ‚ùå –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "Please enter your phone"
- ‚ùå –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "database is locked" (–∏–ª–∏ —Ç–æ–ª—å–∫–æ –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã:

```bash
ps aux | grep python | grep -E "(broadcaster|updater)"
```

**–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã:**
- python broadcaster/main.py
- python google_sheets_updater/main.py

---

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

### 1. –£–≤–µ–ª–∏—á—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫—É –≤—Ä—É—á–Ω—É—é

–í `broadcaster/main.py` –Ω–∞–π–¥–∏—Ç–µ:
```python
await asyncio.sleep(10)  # 10 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏
```

–ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞:
```python
await asyncio.sleep(15)  # 15 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Å—Å–∏–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

```bash
# Linux/Mac
lsof sessions/*.session

# –ï—Å–ª–∏ —Ñ–∞–π–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
bash scripts/stop_all.sh
```

### 3. –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏

–ï—Å–ª–∏ —Ñ–∞–π–ª —Å–µ—Å—Å–∏–∏ –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏–π (< 1KB), –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ:

```bash
# –£–¥–∞–ª–∏—Ç–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—É—é —Å–µ—Å—Å–∏—é
rm sessions/acc1_price.session

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ broadcaster –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ
python broadcaster/main.py
```

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### SQLite –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

SQLite –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∞–π–ª–æ–≤—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞. –ü—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∫ –æ–¥–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (–∏–ª–∏ –∫ —Ä–∞–∑–Ω—ã–º –±–∞–∑–∞–º –≤ –æ–¥–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏) –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã.

### –†–µ—à–µ–Ω–∏–µ

1. **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫:** –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏ broadcaster'–æ–≤
2. **Retry –ª–æ–≥–∏–∫–∞:** –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Å —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–µ–π—Å—è –∑–∞–¥–µ—Ä–∂–∫–æ–π
3. **–ì–ª–æ–±–∞–ª—å–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞:** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-13  
**–í–µ—Ä—Å–∏—è:** 1.0

