# ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

**–î–∞—Ç–∞:** 2025-11-04  
**–í–µ—Ä—Å–∏—è:** Production Ready

---

## üìã –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è .env

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
cat .env | grep -E "(API_ID|API_HASH|SHEET_URL|REPORTS|GOOGLE)"
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

- [ ] `API_ID` - ID –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Telegram
- [ ] `API_HASH` - Hash –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Telegram
- [ ] `BUY_SELL_PRICE_AAA_SHEET_URL` - URL —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∞–π—Å–æ–≤ AAA
- [ ] `BUY_SELL_PRICE_GUS_SHEET_URL` - URL —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∞–π—Å–æ–≤ GUS
- [ ] `ADS_AAA_SHEET_URL` - URL —Ç–∞–±–ª–∏—Ü—ã —Ä–µ–∫–ª–∞–º—ã AAA
- [ ] `ADS_GUS_SHEET_URL` - URL —Ç–∞–±–ª–∏—Ü—ã —Ä–µ–∫–ª–∞–º—ã GUS
- [ ] `GOOGLE_CREDENTIALS_FILE=credentials.json`
- [ ] `ENABLE_REPORTS=true`
- [ ] `REPORTS_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤
- [ ] `REPORTS_CHANNEL_ID` - ID –∫–∞–Ω–∞–ª–∞ –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤

### 2. –§–∞–π–ª—ã —Å–µ—Å—Å–∏–π

```bash
ls -la sessions/
```

–î–æ–ª–∂–Ω—ã —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å:
- [ ] `sessions/acc1.session` - –Ø–±–ª–æ—á–Ω—ã–π –ì—É—Å—å –ú–µ–Ω–µ–¥–∂–µ—Ä
- [ ] `sessions/acc2.session` - –ê–Ω–Ω–∞ –ú–∞–∫–∞—Ä–æ–≤–∞

### 3. Google Sheets credentials

```bash
ls -la credentials.json
```

- [ ] –§–∞–π–ª `credentials.json` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [ ] –ï—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ Google Sheets API

### 4. –¶–µ–ª–µ–≤—ã–µ —á–∞—Ç—ã

```bash
python -c "from config.targets import PRICE_TARGET, ADS_TARGET; print(f'PRICE: {len(PRICE_TARGET)}, ADS: {len(ADS_TARGET)}')"
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- [ ] `PRICE_TARGET`: 22 —á–∞—Ç–∞
- [ ] `ADS_TARGET`: 11 —á–∞—Ç–æ–≤

### 5. –°–æ–æ–±—â–µ–Ω–∏—è

```bash
python -c "from config.messages_aaa import MESSAGESAAA; from config.messages_gus import MESSAGESGUS; from config.messages_aaa_ads import MESSAGES_AAA_ADS; from config.messages_gus_ads import MESSAGES_GUS_ADS; print(f'AAA: {len(MESSAGESAAA)}, GUS: {len(MESSAGESGUS)}, AAA_ADS: {len(MESSAGES_AAA_ADS)}, GUS_ADS: {len(MESSAGES_GUS_ADS)}')"
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö 4 —Ç–∏–ø–æ–≤.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –®–∞–≥ 1: –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
python test_new_broadcasters.py
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
‚úÖ –í–°–ï BROADCASTER'–´ –°–û–ó–î–ê–ù–´ –£–°–ü–ï–®–ù–û!
üéØ –í—Å–µ–≥–æ broadcaster'–æ–≤: 4
‚úÖ –û–∂–∏–¥–∞–µ—Ç—Å—è: 4 (2 PRICE + 2 ADS)
```

- [ ] –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ
- [ ] –í—Å–µ 4 broadcaster'–∞ —Å–æ–∑–¥–∞–Ω—ã
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫

### –®–∞–≥ 2: –¢–µ—Å—Ç –æ—Ç—á–µ—Ç–æ–≤

```bash
python test_reports.py
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π –æ—Ç—á–µ—Ç —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!
```

- [ ] –û—Ç—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω –≤ Telegram –∫–∞–Ω–∞–ª–µ

### –®–∞–≥ 3: –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö —á–∞—Ç–∞—Ö

```bash
python main_test.py
```

–ñ–¥–∏—Ç–µ 3-5 –º–∏–Ω—É—Ç, –∑–∞—Ç–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [ ] Broadcaster'—ã –∑–∞–ø—É—Å—Ç–∏–ª–∏—Å—å
- [ ] –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ —Ç–µ—Å—Ç–æ–≤—ã–µ —á–∞—Ç—ã
- [ ] –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
tail -50 bot.log | grep "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ"
```

---

## üöÄ Production –∑–∞–ø—É—Å–∫

### –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å:

- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö —á–∞—Ç–∞—Ö
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
- [ ] Google Sheets —Å–æ–¥–µ—Ä–∂–∞—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- [ ] –°–∏—Å—Ç–µ–º–∞ –æ—Ç—á–µ—Ç–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- [ ] –°–æ–∑–¥–∞–Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ó–∞–ø—É—Å–∫:

```bash
python main.py
```

### –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏:

1. **–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ:**
```
‚úÖ AAA PRICE Broadcaster —Å–æ–∑–¥–∞–Ω (acc1): 22 —á–∞—Ç–æ–≤, 13 —Å–æ–æ–±—â–µ–Ω–∏–π, —Ü–∏–∫–ª: 20 –º–∏–Ω
‚úÖ GUS PRICE Broadcaster —Å–æ–∑–¥–∞–Ω (acc2): 22 —á–∞—Ç–æ–≤, 4 —Å–æ–æ–±—â–µ–Ω–∏–π, —Ü–∏–∫–ª: 20 –º–∏–Ω
‚úÖ AAA ADS Broadcaster —Å–æ–∑–¥–∞–Ω (acc2): 11 —á–∞—Ç–æ–≤, N —Å–æ–æ–±—â–µ–Ω–∏–π, —Ü–∏–∫–ª: 1 —á–∞—Å
‚úÖ GUS ADS Broadcaster —Å–æ–∑–¥–∞–Ω (acc1): 11 —á–∞—Ç–æ–≤, N —Å–æ–æ–±—â–µ–Ω–∏–π, —Ü–∏–∫–ª: 1 —á–∞—Å
üìä –í—Å–µ–≥–æ broadcaster'–æ–≤: 4
üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤–∫–ª—é—á–µ–Ω–æ (–∫–∞–∂–¥—ã–µ 1.0 —á–∞—Å–æ–≤)
üìà –°–∏—Å—Ç–µ–º–∞ –æ—Ç—á–µ—Ç–æ–≤ –∑–∞–ø—É—â–µ–Ω–∞ (–æ—Ç—á–µ—Ç—ã –∫–∞–∂–¥—ã–µ 3.0 —á–∞—Å–æ–≤)
```

2. **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–∫–∞–∂–¥—ã–π —á–∞—Å):**
```
[INFO] auto_updater: üîÑ –ù–∞—á–∏–Ω–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
[INFO] auto_updater: ‚úÖ –ü—Ä–∞–π—Å—ã AAA –æ–±–Ω–æ–≤–ª–µ–Ω—ã: 13 —Å–æ–æ–±—â–µ–Ω–∏–π
[INFO] auto_updater: ‚úÖ –ü—Ä–∞–π—Å—ã GUS –æ–±–Ω–æ–≤–ª–µ–Ω—ã: 4 —Å–æ–æ–±—â–µ–Ω–∏—è
[INFO] auto_updater: ‚úÖ –†–µ–∫–ª–∞–º–∞ AAA –æ–±–Ω–æ–≤–ª–µ–Ω–∞: 5 —Å–æ–æ–±—â–µ–Ω–∏–π
[INFO] auto_updater: ‚úÖ –†–µ–∫–ª–∞–º–∞ GUS –æ–±–Ω–æ–≤–ª–µ–Ω–∞: 3 —Å–æ–æ–±—â–µ–Ω–∏—è
[INFO] main: üîÑ –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ broadcaster'–æ–≤ —Å –Ω–æ–≤—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏...
[INFO] main: ‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ—Ç—á–µ—Ç–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
```

3. **–û—Ç—á–µ—Ç—ã (–∫–∞–∂–¥—ã–µ 3 —á–∞—Å–∞):**
```
[INFO] telegram_reporter: üìà –ü–æ—Ä–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ç—á–µ—Ç...
[INFO] telegram_reporter: –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–∞: 42 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, 3 –æ—à–∏–±–æ–∫
[INFO] telegram_reporter: ‚úÖ –û—Ç—á–µ—Ç #1 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ –≤ –∫–∞–Ω–∞–ª -1003060449819
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:

```bash
# –í—Å–µ –ª–æ–≥–∏
tail -f bot.log

# –¢–æ–ª—å–∫–æ –æ—Ç—á–µ—Ç—ã
tail -f bot.log | grep telegram_reporter

# –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
tail -f bot.log | grep auto_updater

# –¢–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–∫–∏
tail -f bot.log | grep "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ"
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:

```bash
python show_stats.py
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–¥–µ—Ä–∂–µ–∫

### –¢–µ–∫—É—â–∏–µ (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ):

- **–ü—Ä–∞–π—Å—ã:** 20 –º–∏–Ω—É—Ç –º–µ–∂–¥—É —Ü–∏–∫–ª–∞–º–∏ (–∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å!)
- **–†–µ–∫–ª–∞–º–∞:** 1 —á–∞—Å –º–µ–∂–¥—É —Ü–∏–∫–ª–∞–º–∏ (–Ω–µ —Å–ø–∞–º–∏–º!)
- **–ú–µ–∂–¥—É —á–∞—Ç–∞–º–∏:** 40 —Å–µ–∫—É–Ω–¥
- **–ú–∏–Ω. –∏–Ω—Ç–µ—Ä–≤–∞–ª –Ω–∞ —á–∞—Ç:** 10 –º–∏–Ω—É—Ç

### –ì–¥–µ –∏–∑–º–µ–Ω–∏—Ç—å:

–í `main.py` (—Å—Ç—Ä–æ–∫–∏ 211, 241):
```python
PRICE_CYCLE_DELAY = 20 * 60  # –ü—Ä–∞–π—Å—ã
ADS_CYCLE_DELAY = 60 * 60    # –†–µ–∫–ª–∞–º–∞
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### Scheduler –∏ —Ç–∏—Ö–∏–π —á–∞—Å:

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ `main.py`:
- ‚è∞ –ó–∞–ø—É—Å–∫ –≤ 6:00
- üåô –¢–∏—Ö–∏–π —á–∞—Å: 00:00-07:00

–î–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è (–≤ `.env`):
```bash
ENABLE_SCHEDULING=false
ENABLE_QUIET_HOURS=false
```

### –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:

–ú–Ω–æ–≥–æ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö - **—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!**
- –ó–∞—â–∏—Ç–∞ –æ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ Telegram
- –ë—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Ü–∏–∫–ª–∞—Ö
- –ù–µ –ø–∞–Ω–∏–∫—É–π—Ç–µ! üòä

---

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ (database is locked):

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
pkill -f "python.*main"

# –ü–æ–¥–æ–∂–¥–∞—Ç—å 5 —Å–µ–∫—É–Ω–¥
sleep 5

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞
python main.py
```

### –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –æ—Ç—á–µ—Ç—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
python test_reports.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±–æ—Ç –≤ –∫–∞–Ω–∞–ª–µ
curl "https://api.telegram.org/bot$REPORTS_BOT_TOKEN/sendMessage?chat_id=$REPORTS_CHANNEL_ID&text=test"
```

### –ù–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Google Sheets URLs
python -c "from config.settings import config_manager; c = config_manager.load_config(); print(f'AAA: {bool(c.google_sheets.aaa_sheet_url)}, GUS: {bool(c.google_sheets.gus_sheet_url)}')"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å credentials.json
ls -la credentials.json
```

---

## üìû –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
python test_new_broadcasters.py  # –ü—Ä–æ–≤–µ—Ä–∫–∞ broadcaster'–æ–≤
python test_reports.py           # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—á–µ—Ç–æ–≤
python main_test.py              # –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç (—Ç–µ—Å—Ç–æ–≤—ã–µ —á–∞—Ç—ã)

# –ó–∞–ø—É—Å–∫
python main.py                   # Production

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
tail -f bot.log                  # –õ–æ–≥–∏
python show_stats.py             # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:** `python main_test.py`
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è** –≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö —á–∞—Ç–∞—Ö Telegram
3. **–ï—Å–ª–∏ –≤—Å—ë –û–ö:** `python main.py` (production)
4. **–°–ª–µ–¥–∏—Ç—å –∑–∞ –æ—Ç—á–µ—Ç–∞–º–∏** –≤ Telegram –∫–∞–∂–¥—ã–µ 3 —á–∞—Å–∞
5. **–†–∞–¥–æ–≤–∞—Ç—å—Å—è!** üéâ –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

---

**üìö –î–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π —Å–º–æ—Ç—Ä–∏—Ç–µ –¥—Ä—É–≥–∏–µ .md —Ñ–∞–π–ª—ã**

**üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

*–í–µ—Ä—Å–∏—è: Final*  
*–î–∞—Ç–∞: 2025-11-04*


